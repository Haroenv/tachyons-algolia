#!/usr/bin/env node
/* eslint-disable import/no-commonjs, no-console */
const fs = require('fs');
const postcss = require('postcss');
const postcssImport = require('postcss-import');
const postcssDiscardComment = require('postcss-discard-comments');

const input = './src/main.css';

const css = fs.readFileSync(input, 'utf8');
const plugins = [postcssImport(), postcssDiscardComment()];

postcss(plugins)
  .process(css, {
    from: input,
  })
  .then(result => {
    console.info('Writing to build/tachyons-algolia.css');
    fs.writeFileSync('build/tachyons-algolia.css', result.css);
  });
// console.info(css);

// # mkdir -p ./build
// #
// # # Building normal version
// # # node-sass ./src/main.scss ./build/tachyons-algolia.css
// #
// # # Building compressed version
// # cleancss \
// #   -O1 \
// #   -o ./build/tachyons-algolia.min.css \
// #   ./build/tachyons-algolia.css
